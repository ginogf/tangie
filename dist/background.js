(()=>{var e="tangie";chrome.contextMenus.remove(e,(function(){chrome.runtime.lastError,chrome.contextMenus.create({id:e,title:"Tangie",contexts:["selection"]})}));var t="";chrome.contextMenus.onClicked.addListener((function(e,n){"tangie"===e.menuItemId&&(t=e.selectionText)})),chrome.runtime.onMessage.addListener((function(e,n,o){if("getSelectedText"!==e.message){var a,r=e.action,c=e.text;switch(r){case"summarize":a="Can you summarize the following text? ".concat(c);break;case"explain":a="Can you explain the following text in simple terms? ".concat(c);break;case"paraphrase":a="Can you paraphrase the following text? ".concat(c)}return fetch("https://api.openai.com/v1/chat/completions",{method:"POST",headers:{"Content-Type":"application/json",Authorization:"Bearer ".concat("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")},body:JSON.stringify({model:"gpt-4",messages:[{role:"system",content:"You are ChatGPT, a helpful assistant."},{role:"user",content:a}],temperature:0})}).then((function(e){return e.json()})).then((function(e){o({text:e.choices[0].message.content})})).catch((function(e){console.error("Error:",e)})),!0}o({text:t})}))})();